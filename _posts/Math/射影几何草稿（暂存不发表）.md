## 定比分点

> 给定两点 $x,y$，有一点 $z$ 在直线 $x,y$ 上，满足 $\frac {xz} {zy} = \lambda$。求出 $z$ 的坐标。

$$\vec{xz} = \lambda \vec{zy}$$

$$\begin{aligned}
    z - x &= \lambda (y - z) \\
    (\lambda + 1) z &= x + \lambda y \\
\end{aligned}$$

由于 $(\lambda + 1) z \sim z$，可以写成：

$$z = x + \lambda y$$

## Menelaus 定理与 Ceva 定理

> **Menelaus 定理**
>
> 给定三角形 $ABC$ 和一条直线 $l$，$l$ 与 $A,B,C$ 的对边所在直线分别交于 $L,M,N$。证明：
>
> $$\frac {AN} {NB} \times \frac {BL} {LC} \times \frac {CM} {MA} = -1$$
>
> 注：同一直线上的两线段比值，若同向则直接为长度之比，若反向则定义为长度之比的相反数。
>
> <img src="https://upload.wikimedia.org/wikipedia/commons/6/69/Menelaus_Theorem1.png" width=300/>

观察到 $B,C,N,M$ 形成一个四边形结构，设射影坐标系。

令

- $B = (1:0:0) = x_\infty$
- $M = (0:1:0) = y_\infty$
- $C = (0:0:1) = O$
- $N = (1:1:1)$

现在我们要求 $A,L$。

$$\begin{aligned}
    A &= C + \mu M = (0:\mu:1) \\
    &= N + \lambda B = (1+\lambda:1:1) \\
\end{aligned}$$

解得 $A = (0:1:1)$。

$$\begin{aligned}
    L &= C + \mu B = (\mu:0:1) \\
    &= N + \lambda M = (1:1+\lambda:1) \\
\end{aligned}$$

解得 $L = (1:0:1)$。

（符号滥用注意：$A$ 和 $L$ 中各自的 $\mu,\lambda$ 没有关系）

我们把 $L,M,N$ 用 $A,B,C$ 的线性组合表示出来：

$$\begin{cases}
    N = A + B \\
    L = B + C \\
    M = A - C \\
\end{cases}$$

套入定比分点公式，可以得到比例 $\lambda$：

$$\begin{cases}
    \frac {AN} {NB} = 1 \\
    \frac {BL} {LC} = 1 \\
    \frac {CM} {MA} = -1 \\
\end{cases}$$

$$\boxed{
    \frac {AN} {NB} \times \frac {BL} {LC} \times \frac {CM} {MA} = -1
}$$

<img src="https://cdn.luogu.com.cn/upload/image_hosting/1h34on8y.png" width=450/>



TODO:

> **Ceva 定理**
>
> > 给定三角形 $ABC$ 和一个点 $O$。如图构造点 $D,E,F$。证明：
>
> $$\frac {AF} {FB} \times \frac {BD} {DC} \times \frac {CE} {EA} = 1$$
>
> <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Ceva%27s_theorem_1.svg/960px-Ceva%27s_theorem_1.svg.png" width=300/>

它是 Menelaus 定理的对偶形式，天然成立。TODO: $-1$ 和 $1$？