# 23 套

[【MX-S9】梦熊 NOIP 2025 模拟赛 1 & LAOI Round 16（同步赛）](https://www.luogu.com.cn/contest/287506)

## 

若 $[l,r]$ 不存在子区间 $[l', r']$ 使得 $f(l', r') = f(l, r)$，则称 $[l, r]$ 极小。

原问题就是对极小区间的计数。

极小的充要条件为：$l,r$ 在 $f(l, r)$ 上是叶子。

令

$$s_i = \max_{i 是 f(i,x) 叶子} x$$

扫描线

考虑怎么求 $s$。以 $i$ 为根，$(i,x]$ 的所有点都在同一棵子树内。

对于每个子树求出最小的 $x$ 使得 $[i,x]$ 至少包含子树内一点。次小值 $-1$。

边数 $O(n)$，查 $O(n)$ 次。

$O((n+q) \log n)$。

# 24 套

[【MX-S11】梦熊 NOIP 2025 模拟赛 3 & WAOI R7 & FeOI R6.5（同步赛）](https://www.luogu.com.cn/contest/287508)

## [P14522 【MX-S11-T3】空之碎物](https://www.luogu.com.cn/problem/P14522)

$r-l+1 > \log_2 V = 25$ 时，答案为 $\max_{i=l}^r a_i$。

长度 $< \log_2 V$ 的小区间暴力，$O(n \log^3 V)$。

TODO:

$O(n \log^2 V)$

## [P14523 【MX-S11-T4】Ice Drop](https://www.luogu.com.cn/problem/P14523)

TODO: 好题！